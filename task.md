## Техническое задание

### Проект: *Применение алгоритмов машинного обучения для анализа валютной пары KZT/USD*

---

### 1. Цель проекта

Разработать систему, которая:

* автоматически собирает данные о курсе валютной пары **KZT/USD**, соответствующие **новости за те же даты**, а также ключевые показатели, способные влиять на изменчивость курса;
* выполняет **анализ влияния новостного фона и ключевых показателей на курс** и **прогнозирует изменение курса на следующий день**;

---

### 2. Основная идея и новизна

В отличие от типичных моделей прогнозирования, использующих только временные ряды, в этом проекте вводится **гибридный подход**:
предсказание курса осуществляется с учетом как **исторических котировок**, так и **семантического анализа новостей** (sentiment analysis).
Это позволит учитывать не только математические тренды, но и реакцию рынка на экономические и политические события.

---

### 3. Источники данных

1. Для модели добавляем ключевой столбец "Дата" (с 01.01.2020 по сегодняшний день)

2. **Исторический курс пары KZT/USD:** 

   * Источник: [Национальный Банк РК](https://nationalbank.kz/ru/exchangerates/ezhednevnye-oficialnye-rynochnye-kursy-valyut) выгрузка с выбранной датой (с, по), и чекбокском  в графе "1 ДОЛЛАР США"
   * Для модели добавляем столбцы: 
     - "KZT (1 USD)" из столбца "USD" из выгрузки
     - Рассчетный столбец "Изменчивость, %" - на основании изменения цены предыдщего дня к текущему ([Референс](https://ru.investing.com/currencies/usd-kzt-historical-data) - столбец "Изм.%")

3. **Новостные данные:**

   * Источник: [https://kapital.kz/news](https://kapital.kz/news) - парсим по страницам: "Лента новостей", "Экономика", "Финансы", "Государство", "Технологии", "Инвестиции", "Мир", "Бизнес", "Назначения"
   * Для модели добавляем столбцы: 
     - Заголовок статьи
     - Описание статьи

4. **График принятия решений по базовой ставке:**

   * Источник: [Национальный Банк РК](https://nationalbank.kz/ru/news/grafik-prinyatiya-resheniy-po-bazovoy-stavke/rubrics/2237) - парсим по страницам (каждый год вплоть до нашего начального) и вносим значения в модель в промежуток с "Дата установления базовой ставки" (включительно) столбец "Размер базовой ставки, %"
   * Для модели добавляем столбцы: 
     - Размер базовой ставки (%)

5. **Исторический показатель инфляционных тенденций:** 

   * Источник: [Национальный Банк РК](https://nationalbank.kz/ru/news/inflyacionnye-tendencii/rubrics/2315?page=1) парсим по страницам за каждый месяц (каждый год вплоть до нашего начального)
   * Для модели добавляем столбцы: 
     - "inflation rate" - общий месячный показатель. Например, если парсим по странице: [Инфляционные тенденции. Август 2025](https://nationalbank.kz/file/download/112442), тогда вносим на даты 01.08.2025 до 31.08.2025 (включительно) (берем до конца месяца)

6. **Исторический курс пары KZT/RUB:** 

   * Источник: [Национальный Банк РК](https://nationalbank.kz/ru/exchangerates/ezhednevnye-oficialnye-rynochnye-kursy-valyut) выгрузка с выбранной датой (с, по), и чекбокском  в графе "1 РОССИЙСКИЙ РУБЛЬ"
   * Для модели добавляем столбцы: 
     - "KZT (1 RUB)" из столбца "RUB" из выгрузки
     - Рассчетный столбец "Изменчивость, %" - на основании изменения цены предыдщего дня к текущему ([Референс](https://ru.investing.com/currencies/usd-kzt-historical-data) - столбец "Изм.%")

7. **Исторический курс пары USD/Gold:** 

   * Источник: [LBMA](https://www.lbma.org.uk/prices-and-data/precious-metal-prices#/table) парсинг с выбранным видом металла, ежедневным прогнозом и годом
   * Для модели добавляем столбцы: 
     - "Gold (US) (1 oz)" как среднее арифметическое по столбцам "USD $ - AM" и "USD $ - PM"
     - Рассчетный столбец "Изменчивость, %" - на основании изменения цены предыдщего дня к текущему ([Референс](https://ru.investing.com/currencies/usd-kzt-historical-data) - столбец "Изм.%")

8. **Исторический курс пары KZT/Gold:** 

   * Источник: [Национальный Банк РК](https://www.nationalbank.kz/ru/gold/zoloto) выгрузка с выбранным видом металла, ежедневным прогнозом и годом
   * Для модели добавляем столбцы: 
     - "Gold (KZ) (1 g)" как среднее арифметическое по столбцу "Стоимость"
     - Рассчетный столбец "Изменчивость, %" - на основании изменения цены предыдщего дня к текущему ([Референс](https://ru.investing.com/currencies/usd-kzt-historical-data) - столбец "Изм.%")

9. **Историческое значение показателя TONIA:** 

   * Источник: [Казахстанская фондовая биржа](https://kase.kz/ru/indexes-and-indicators/repo/tonia) выгрузка архива внизу страницы с выбранной датой (с, по)
   * Для модели добавляем столбцы: 
     - "tonia" как среднее арифметическое по столбцу "Закрытие"
     - Рассчетный столбец "Изменчивость, %" - на основании изменения цены предыдщего дня к текущему ([Референс](https://ru.investing.com/currencies/usd-kzt-historical-data) - столбец "Изм.%")


10. **Исторический курс пары USD/Brent:** 

   * Источник: [Energy Information Administration](https://www.eia.gov/dnav/pet/hist/rbrteD.htm) выгрузка с ежедневным прогнозом (каждый месяц/год вплоть до нашего начального)
   * Для модели добавляем столбцы: 
     - "Brent (USD per Barrel)" значение берем со столбца "Europe Brent Spot Price FOB (Dollars per Barrel)"
     - Рассчетный столбец "Изменчивость, %" - на основании изменения цены предыдщего дня к текущему ([Референс](https://ru.investing.com/currencies/usd-kzt-historical-data) - столбец "Изм.%")

https://www.eia.gov/dnav/pet/hist/rbrteD.htm

### 4. Основные задачи разработчика

#### 4.1. Сбор данных

* Реализовать **парсер**, собирающий данные с пункта 3 - "Источники данных";

#### 4.2. Предобработка данных

* Для валютных данных:
  
  * конвертировать даты к единому формату;
  * Если в определённый день значение отсутствует (например, нет публикации инфляции), нужно:
    * либо использовать интерполяцию (например, pandas.Series.interpolate());
    * либо заполнить последним известным значением.
  * Все значения должны быть числовыми (float).
  * рассчитать дополнительные признаки (разница, процент изменения, в зависимости от столбца).

* Для текстов новостей:
  
  * удалить стоп-слова, знаки препинания;
  * привести слова к нормальной форме (лемматизация);
  * провести анализ **тональности текста** (позитивная / нейтральная / негативная);
  * при необходимости — определить ключевые слова и темы.

#### 4.3. Объединение данных

* Объединить датасеты по дате:

  * каждой дате валютного курса сопоставляется усреднённая **тональность новостного потока за этот день**;
  * при отсутствии новостей — использовать предыдущую известную тональность.

#### 4.4. Построение и обучение моделей

* Разделить данные на **train/test** выборки.
* Обучить несколько моделей для прогнозирования курса на **следующий день**:

  * Random Forest или XGBoost (улучшенная);
  * LSTM или GRU (нейросеть для временных рядов).
  
* Входные признаки:

  * исторические значения курсов;
  * процент изменения за n предыдущих дней;
  * показатели новостной тональности;
  * исторические других значимых значений;

#### 4.5. Оценка моделей

* Метрики:

  * MAE (средняя абсолютная ошибка),
  * RMSE (корень среднеквадратичной ошибки),
  * R² (коэффициент детерминации).
* Визуализация:

  * график реальных и предсказанных значений;
  * распределение ошибок.

#### 4.6. Интерпретация результатов

* Сформировать **аналитическую панель (или отчет)**, где:

  * показан прогноз на следующий день;
  * отмечено, в какую сторону ожидается движение курса (рост / падение);
  * выдана **рекомендация**:
    * *при нейтральном прогнозе тенге* — «Прогнозируется стабильность курса. Рекомендуется: сохранять текущую стратегию внешнеторговых операций.»
    * *при прогнозе укрепления тенге* — «Ожидается укрепление. Рекомендуется: сократить экспортные издержки и пересмотреть валютные резервы.»
    * *при прогнозе ослабления тенге* — «Ожидается ослабление. Рекомендуется: приостановить импортные закупки и усилить контроль за валютной позицией.»

---

### 5. Дополнительные задачи (опционально)

* Реализовать визуальный интерфейс (например, с использованием Streamlit), где пользователь может:

  * увидеть графики курса;
  * выбрать диапазон дат;
  * запустить обновление прогноза;
  * просмотреть новости, оказавшие наибольшее влияние.

---

### 6. Используемые технологии (Дополнить позже, по мере разработки. Символом "???" - выражены библиотеки, которые пока не использовались)

* **Язык:** Python
* **Библиотеки:**

  * `pandas`, `numpy` — обработка данных
  * `requests`, `BeautifulSoup4` — парсинг сайтов
  * ??? `matplotlib`, `seaborn`, `plotly` — визуализация
  * ??? `scikit-learn`, `xgboost`, `keras`/`tensorflow` — машинное обучение
  * ??? `nltk`, `spacy`, `pymorphy2` — обработка текста и тональности

---

### 8. Ожидаемый результат

* Автоматизированная система, которая:

  1. ежедневно обновляет данные;
  2. анализирует новости и курс валюты;
  3. строит прогноз на следующий день;
  4. формирует рекомендации для внешнеторговых решений (импорт/экспорт);
